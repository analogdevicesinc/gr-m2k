id: m2k_digital_out_sink
label: M2K Digital Out Sink
flags: [ python ]

parameters:
  - id: uri
    label: URI
    dtype: string
    default: 'ip:192.168.2.1'

  - id: buffer_size
    label: Buffer size
    dtype: int
    default: 0x8000

  - id: channels
    label: Channels
    dtype: int_vector
    default: [0]

  - id: sampling_frequency
    label: Sampling frequency
    dtype: float
    default: 100000

  - id: kernel_buffers
    label: Kernel buffers
    dtype: int
    default: 4

  - id: cyclic
    label: Cyclic
    dtype: bool
    default: False

asserts:
  - ${kernel_buffers > 0 and kernel_buffers <= 64}


inputs:
  - domain: stream
    dtype: short
    multiplicity: 1


templates:
  imports: import m2k
  make: m2k.digital_out_sink(${uri},
    ${buffer_size},
    ${channels},
    ${sampling_frequency},
    ${kernel_buffers},
    ${cyclic})
  callbacks:
    - set_params(${sampling_frequency})

documentation: |-
  This block allows for streaming data from ADALM2000

file_format: 1
